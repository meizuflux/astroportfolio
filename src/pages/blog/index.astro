---
import BaseLayout from "../../layouts/BaseLayout.astro"
import { formatDate, sortByYear } from "../../utils"

const allPosts = Astro.fetchContent("./*.md");
const sortedPosts = allPosts.sort((a, b) => new Date(b.modified) - new Date(a.modified));

const posts = sortByYear(sortedPosts)
---
<style>
ul {margin-left: 0; padding-left: 50px;}

</style>
<BaseLayout title="Blog">
    <h1 style="text-align: center;">Blog</h1>

    {(Object.keys(posts).sort((a, b) => b-a)).map((key, index) => (
        <h2>{key}</h2>
        <ul>
            {posts[key].map(p => (
                <li>
                    <a href={p.url}>{p.title}</a> â€” <time datetime>{formatDate(p.modified)}</time>
                </li>
            ))}
        </ul>
    ))}

</BaseLayout>

